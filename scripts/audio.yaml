######################################################################
# Script: Laura
# Inputs:
# - type:
#         1 -> bell'affare
#         2 -> belan
#         3 -> una schifezza
#         4 -> ma che schifo Ã¨?
#         5 -> mamma mia
#         6 -> no
#         7 -> io mi chiamo Stitch
#
# Operations:
# - script.volume_manager
# - media_player.play_media
######################################################################

laura_voice:
  alias: Voce Laura
  sequence:
    - condition: state
      entity_id: input_boolean.speech_notifications
      state: 'on'

    - wait_template: >-
        {% if media_player | length == 0 %}
          {% set media_player = 'media_player.google_home' %}
        {% endif %}
        {{ not is_state(media_player, 'playing') }}

    - service: script.volume_manager
      data_template:
        media_player: >-
          {# Check Null Input #}
          {% if media_player | length == 0 %}
            {% set media_player = 'media_player.google_home' %}
          {% endif %}
          {{ media_player }}
        volume_level: "{{ volume_level }}"

    - service: media_player.play_media
      data_template:
        entity_id: >-
          {# Check Null Input #}
          {% if media_player | length == 0 %}
            {% set media_player = 'media_player.google_home' %}
          {% endif %}
          {{ media_player }}
        media_content_type: 'audio/mp4'
        media_content_id: >-
          {%- macro set_type() -%}
            {{ range(1,8,1) | random }}
          {%- endmacro -%}
          {% if type is not defined %}
            {% set type = set_type() %}
          {% endif %}
          https://home.giorgioravera.it/local/audio/laura/{{type}}.mp3

laura_voice_1:
  alias: Voce Laura 1
  sequence:
  - service: script.laura_voice
    data:
      type: '1'

laura_voice_2:
  alias: Voce Laura 2
  sequence:
  - service: script.laura_voice
    data:
      type: '2'

laura_voice_3:
  alias: Voce Laura 3
  sequence:
  - service: script.laura_voice
    data:
      type: '3'

laura_voice_4:
  alias: Voce Laura 4
  sequence:
  - service: script.laura_voice
    data:
      type: '4'

laura_voice_5:
  alias: Voce Laura 5
  sequence:
  - service: script.laura_voice
    data:
      type: '5'

laura_voice_6:
  alias: Voce Laura 6
  sequence:
  - service: script.laura_voice
    data:
      type: '6'

laura_voice_7:
  alias: Voce Laura 7
  sequence:
  - service: script.laura_voice
    data:
      type: '7'

######################################################################
# Script: Babu Frik
# Inputs:
# - type:
#         1 -> I'm babu frik
#         2 -> heheeee
#
# Operations:
# - script.volume_manager
# - media_player.play_media
######################################################################

babu_voice:
  alias: Voce Babu
  sequence:
    - condition: state
      entity_id: input_boolean.speech_notifications
      state: 'on'

    - wait_template: >-
        {% if media_player | length == 0 %}
          {% set media_player = 'media_player.google_home' %}
        {% endif %}
        {{ not is_state(media_player, 'playing') }}

    - service: script.volume_manager
      data_template:
        media_player: >-
          {# Check Null Input #}
          {% if media_player | length == 0 %}
            {% set media_player = 'media_player.google_home' %}
          {% endif %}
          {{ media_player }}
        volume_level: "{{ volume_level }}"

    - service: media_player.play_media
      data_template:
        entity_id: >-
          {# Check Null Input #}
          {% if media_player | length == 0 %}
            {% set media_player = 'media_player.google_home' %}
          {% endif %}
          {{ media_player }}
        media_content_type: 'audio/mp4'
        media_content_id: >-
          {% if type is not defined %}
            {% set type = 1 %}
          {% endif %}
          https://home.giorgioravera.it/local/audio/babu/{{type}}.mp3

babu_voice_1:
  alias: Voce Babu 1
  sequence:
  - service: script.babu_voice
    data:
      type: '1'

babu_voice_2:
  alias: Voce Babu 2
  sequence:
  - service: script.babu_voice
    data:
      type: '2'
